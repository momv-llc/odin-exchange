# ODIN Exchange - Setup Scripts

–°–∫—Ä–∏–ø—Ç—ã –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞ ODIN Exchange.

## üìã –°–æ–¥–µ—Ä–∂–∏–º–æ–µ

| –§–∞–π–ª | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|
| `install.sh` | –û—Å–Ω–æ–≤–Ω–æ–π —É—Å—Ç–∞–Ω–æ–≤–æ—á–Ω—ã–π —Å–∫—Ä–∏–ø—Ç |
| `setup-git.sh` | –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Git hooks –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ |
| `dev.sh` | –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ |
| `deploy.sh` | Production –¥–µ–ø–ª–æ–π |
| `README.md` | –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è |

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞
cd odin-exchange

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫
./setup_script/install.sh
```

### –ß—Ç–æ –¥–µ–ª–∞–µ—Ç install.sh

1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π**
   - Node.js 18+
   - npm
   - Docker (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
   - Docker Compose (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
   - Git

2. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è**
   - –°–æ–∑–¥–∞—ë—Ç `.env` –∏–∑ `.env.example`
   - –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ JWT —Å–µ–∫—Ä–µ—Ç—ã
   - –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç VAPID –∫–ª—é—á–∏ –¥–ª—è push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

3. **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π**
   - Backend (NestJS, Prisma)
   - Frontend (React, Vite)

4. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö**
   - –ó–∞–ø—É—Å–∫–∞–µ—Ç PostgreSQL –∏ Redis —á–µ—Ä–µ–∑ Docker
   - –ü—Ä–∏–º–µ–Ω—è–µ—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ Prisma

5. **–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞**
   - Production —Å–±–æ—Ä–∫–∞ frontend (–ø–æ –∑–∞–ø—Ä–æ—Å—É)

## üîß –û—Ç–¥–µ–ª—å–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã

### install.sh

–ü–æ–ª–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞:

```bash
./setup_script/install.sh
```

**–§–ª–∞–≥–∏:**
- –°–∫—Ä–∏–ø—Ç –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π, –∑–∞–¥–∞—ë—Ç –≤–æ–ø—Ä–æ—Å—ã –ø–æ —Ö–æ–¥—É —É—Å—Ç–∞–Ω–æ–≤–∫–∏

### setup-git.sh

–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Git –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞:

```bash
./setup_script/setup-git.sh
```

**–ß—Ç–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç:**
- Pre-commit hook (–ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ–∫—Ä–µ—Ç–æ–≤, –ª–∏–Ω—Ç–∏–Ω–≥)
- Commit-msg hook (–ø—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞ —Å–æ–æ–±—â–µ–Ω–∏–π)
- Pre-push hook (–∑–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤)
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ .gitignore
- Git –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (rebase, —Ü–≤–µ—Ç–∞)

### dev.sh

–ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (–∑–∞–ø—É—Å–∫–∞–µ—Ç –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã):

```bash
./setup_script/dev.sh
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –ó–∞–ø—É—Å–∫–∞–µ—Ç PostgreSQL, Redis, MailHog —á–µ—Ä–µ–∑ Docker
- –ó–∞–ø—É—Å–∫–∞–µ—Ç Backend –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- –ó–∞–ø—É—Å–∫–∞–µ—Ç Frontend –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –≤—Å—ë –ø—Ä–∏ Ctrl+C

### deploy.sh

Production –¥–µ–ø–ª–æ–π —á–µ—Ä–µ–∑ Docker:

```bash
./setup_script/deploy.sh
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º
- –°–æ–±–∏—Ä–∞–µ—Ç Docker –æ–±—Ä–∞–∑—ã
- –ü—Ä–∏–º–µ–Ω—è–µ—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- –ó–∞–ø—É—Å–∫–∞–µ—Ç –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∑–¥–æ—Ä–æ–≤—å–µ —Å–µ—Ä–≤–∏—Å–æ–≤

## üìù –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ
- **Node.js** 18.0.0+
- **npm** 9.0.0+
- **Git** 2.0+

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ
- **Docker** 20.0+
- **Docker Compose** 2.0+

### –î–ª—è production
- PostgreSQL 15+
- Redis 7+
- Nginx

## ‚öôÔ∏è –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `.env` —Ñ–∞–π–ª:

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ
```env
DATABASE_URL=postgresql://...
JWT_SECRET=<auto-generated>
JWT_REFRESH_SECRET=<auto-generated>
```

### –ü–ª–∞—Ç—ë–∂–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã
```env
STRIPE_SECRET_KEY=sk_test_...
STRIPE_PUBLISHABLE_KEY=pk_test_...
STRIPE_WEBHOOK_SECRET=whsec_...

PAYPAL_CLIENT_ID=...
PAYPAL_CLIENT_SECRET=...
```

### API –∫—É—Ä—Å–æ–≤ –≤–∞–ª—é—Ç
```env
COINGECKO_API_KEY=        # –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
FIXER_API_KEY=your-key    # –î–ª—è —Ñ–∏–∞—Ç–Ω—ã—Ö –∫—É—Ä—Å–æ–≤
```

### –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
```env
TELEGRAM_BOT_TOKEN=...
TELEGRAM_ADMIN_CHAT_ID=...

VAPID_PUBLIC_KEY=<auto-generated>
VAPID_PRIVATE_KEY=<auto-generated>
```

## üê≥ Docker

### –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
```bash
docker-compose up -d
```

### –¢–æ–ª—å–∫–æ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
```bash
docker-compose up -d postgres redis
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
```bash
docker-compose logs -f api
docker-compose logs -f frontend
```

### –û—Å—Ç–∞–Ω–æ–≤–∫–∞
```bash
docker-compose down
```

## üî® –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –ó–∞–ø—É—Å–∫ –±–µ–∑ Docker

**Terminal 1 - Backend:**
```bash
cd backend
npm run start:dev
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm run dev
```

### –î–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–∏—Å–∞–º

| –°–µ—Ä–≤–∏—Å | URL |
|--------|-----|
| Frontend | http://localhost:5173 (dev) / http://localhost:80 (docker) |
| API | http://localhost:3000 |
| Admin Panel | http://localhost:5173/admin |
| MailHog | http://localhost:8025 |
| Prisma Studio | http://localhost:5555 |

### Prisma Studio
```bash
cd backend
npx prisma studio
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# Backend tests
cd backend
npm test

# Frontend tests
cd frontend
npm test
```

## üì¶ Production —Å–±–æ—Ä–∫–∞

```bash
# Backend
cd backend
npm run build

# Frontend
cd frontend
npm run build
```

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ

```bash
# –û–±–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
cd backend && npm update
cd ../frontend && npm update

# –û–±–Ω–æ–≤–∏—Ç—å Prisma
cd backend
npx prisma migrate deploy
npx prisma generate
```

## üêõ Troubleshooting

### Port already in use
```bash
# –ù–∞–π—Ç–∏ –ø—Ä–æ—Ü–µ—Å—Å
lsof -i :3000
# –ó–∞–≤–µ—Ä—à–∏—Ç—å
kill -9 <PID>
```

### Prisma migration issues
```bash
cd backend
npx prisma migrate reset  # ‚ö†Ô∏è –£–¥–∞–ª–∏—Ç –≤—Å–µ –¥–∞–Ω–Ω—ã–µ!
npx prisma migrate dev
```

### Docker container issues
```bash
# –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker-compose down
docker-compose build --no-cache
docker-compose up -d
```

### Node modules issues
```bash
# –û—á–∏—Å—Ç–∏—Ç—å –∏ –ø–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
rm -rf node_modules package-lock.json
rm -rf backend/node_modules backend/package-lock.json
rm -rf frontend/node_modules frontend/package-lock.json
./setup_script/install.sh
```

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º —Å —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–µ—Ä—Å–∏–∏ Node.js –∏ npm
2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –ø–æ—Ä—Ç—ã 3000, 5173, 5432, 6379 —Å–≤–æ–±–æ–¥–Ω—ã
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `docker-compose logs`

---

**ODIN Exchange** ¬© 2024
